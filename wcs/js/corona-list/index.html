<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Corona List</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>
<body>
<div class="container p-3">
  <form>
    <div class="form-group">
      <label for="vorname">Vorname</label>
      <input id="vorname" class="form-control" type="text" name="vorname" placeholder="Bitte eingeben..." required>
    </div>
    <div class="form-group">
      <label for="nachname">Nachname</label>
      <input id="nachname" class="form-control" type="text" name="nachname" placeholder="Bitte eingeben..." required>
    </div>
    <div class="form-group">
      <label for="adresse">Adresse</label>
      <textarea id="adresse" class="form-control" name="adresse" placeholder="Bitte eingeben..."></textarea>
    </div>
    <div class="form-group">
      <label for="telefon">Telefon</label>
      <input id="telefon" class="form-control" type="text" name="telefon" placeholder="Bitte eingeben...">
    </div>
    <div class="form-group">
      <label for="email">Email</label>
      <input id="email" class="form-control" type="text" name="email" placeholder="Bitte eingeben...">
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    <div id="qrcode"></div>
  </div>
  <script src="qrcode.js"></script>
  <script>
    document.querySelector( 'form' ).addEventListener( 'submit', /** @param {HTMLFormElement} event.target */ function ( event ) {
      event.preventDefault();
      let contact = {
        vorname: event.target.querySelector( 'input[name="vorname"]' ).value,
        nachname: event.target.querySelector( 'input[name="nachname"]' ).value,
        adresse: event.target.querySelector( 'textarea[name="adresse"]' ).value,
        telefon: event.target.querySelector( 'input[name="telefon"]' ).value,
        email: event.target.querySelector( 'input[name="email"]' ).value
      };
      contact = JSON.stringify( contact );
      localStorage.setItem( 'contact', contact );
      contact = btoa( contact );
      new QRCode( document.getElementById( 'qrcode' ), 'https://akless.github.io/akless/wcs/js/corona-list/index.html?contact=' + contact );
    } );
  </script>
</body>
</html>